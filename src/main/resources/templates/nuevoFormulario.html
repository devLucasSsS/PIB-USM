<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <!-- jQuery library -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <!-- Bootstrap JS -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <!-- Custom CSS -->
  <link th:href="@{/main.css}" rel="stylesheet" />
  <!-- estilo propio -->
</head>

<body>

<div th:insert="_fragments :: nav"></div>
<!--<a th:object="${institucion}" th:field="*{nombre_institucion}"></a> -->
<div class="container">
  <div class="row">
    <div class="col-sm-6 col-sm-offset-3">
      <div class="form-container">
        <h2>Nueva Petición</h2>
        <form action="" method="post" th:object="${peticion}">
          <input hidden="hidden" type="datetime-local" id="hora_local">
          <input hidden="hidden" th:value="2" th:field="*{id_estado}">
          <input type="text" hidden="hidden" id="ip" th:field="*{ip}">
          <div class="form-group">
            <label for="rut">Rut:</label>
            <input type="text" class="form-control" id="rut" name="rut" placeholder="Introduce tu rut"  th:field="*{rut_prestatario}" required>
            <input hidden="hidden" th:object="${prestatario}" th:value="${peticion.rut_prestatario}">
          </div>
          <div class="form-group">
            <label for="nombre">Nombre y apellido:</label>
            <input type="text" class="form-control" id="nombre" name="nombre" placeholder="Introduce tu nombre" th:object="${prestatario}" th:field="*{nombre}" required>
          </div>
          <div class="form-group">
            <label for="email">Correo:</label>
            <input type="text" class="form-control" id="email" name="email" placeholder="Introduce tu correo electronico" th:object="${prestatario}" th:field="*{email}" required>
          </div>
          <div class="form-group">
            <label for="titulo">Titulo:</label>
            <input type="text" class="form-control" id="titulo" name="titulo" placeholder="Introduce el titulo del libro" th:field="*{libro}" required>
          </div>
          <div class="form-group">
            <label for="autor">Autor:</label>
            <input type="text" class="form-control" id="autor" name="autor" placeholder="Introduce el autor del libro" th:field="*{autor}" required>
          </div>
          <div class="form-group">
            <label for="edicion">Edicion:</label>
            <input type="text" class="form-control" id="edicion" name="edicion" placeholder="Introduce la edicion del libro" th:field="*{edicion}" required>
          </div>
          <div class="form-group">
            <label for="link">URL del libro:</label>
            <input type="text" class="form-control" id="link" name="link" placeholder="Introduce la direccion web del libro" th:field="*{link}"  required>
          </div>
          <div class="form-group">
            <label for="institucion">Institucion</label>
            <select id="institucion" name="institucion" th:field="*{id_institucion_prestataria}" >
              <option th:each="inst : ${institucion}"  th:value="${inst.id_institucion}" th:text="${inst.nombre_institucion}"></option>
            </select>
          </div>
          <div class="form-group">
            <label for="biblioteca">Biblioteca</label>
            <select id="biblioteca" name="biblioteca">
              <option th:each="bib : ${bibliotecas}" th:value="${bib.id_biblioteca}" th:text="${bib.nombre_biblioteca}" ></option>
            </select>
          </div>
          <div class="form-group">
            <input type="radio" id="libro" name="seleccion" value="Libro">
            <label for="libro">Libro</label>
            <input type="radio" id="Documento" name="seleccion" value="Documento">
            <label for="Documento">Documento</label>
          </div>

            <button type="submit" class="btn btn-primary">Enviar</button>
        </form>
      </div>
    </div>
  </div>
</div>
<div>

</div>
<script>
</script>
<script>
  hora_local = document.getElementById("hora_local");
  //date = new Date().toLocaleString();
  //dateformat= date.toISOString().slice(0,16);
  date = new Date(); //.toLocaleString("es-CL", { timeZone: "America/Santiago" }).slice(0, -3);
  hora_local.value = date.toISOString().slice(0,16);

</script>
<script>
  const ip = document.getElementById("ip");
  fetch('https://api.ipify.org?format=json')
  .then(response => response.json())
  .then(data => {
    ip.value = data.ip;
  })
  .catch(error => {
    console.error(error);
  });
</script>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>


</body>
</html>



<!--<div class="form-group">
  <label for="email">Correo electrónico:</label>
  <input type="email" class="form-control" id="email" name="email" placeholder="Introduce tu correo electrónico"  required>
</div>
<div class="form-group">
  <div class="form-group">
    <label for="telefono">Teléfono:</label>
    <input type="tel" class="form-control" id="telefono" name="telefono" placeholder="Introduce tu número de teléfono">
  </div>
  <div class="form-group">
    <label for="mensaje">Mensaje:</label>
    <textarea class="form-control" id="mensaje" name="mensaje" rows="4" placeholder="Introduce tu mensaje"></textarea>
  </div>
             </div>

   -->